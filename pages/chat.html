<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify A Claim - Verifact</title>
    <meta name="description" content="You can Verify your rumours here">

    <!-- Favicon -->
    <link rel="icon" href="../public/favicon.ico" sizes="any">
    <link href="../src/output.css" rel="stylesheet">
    <style>
      /* Custom scrollbar for Webkit browsers (optional, for aesthetics) */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f5f9; /* slate-100 */
      }
      ::-webkit-scrollbar-thumb {
        background: #94a3b8; /* slate-400 */
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #64748b; /* slate-500 */
      }

      /* Keyframes and CSS Variables from AppContent */
      @keyframes fade-in-up {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fade-in-up {
        animation: fade-in-up 0.5s ease-out;
      }
      
      :root {
        --verified-color: rgb(52 211 153); /* emerald-500 */
        --debunked-color: rgb(244 63 94);   /* rose-500 */
        --inconclusive-color: rgb(245 158 11);/* amber-500 */
        --pending-color: rgb(14 165 233);  /* sky-500 */
      }
      body {
        font-family: 'Inter', 'Noto Sans', sans-serif;
      }
    </style>
</head>
<body class="font-['Inter','Noto_Sans',sans-serif]">

    <div class="flex flex-col h-screen overflow-hidden bg-slate-100">
      <header class="flex-shrink-0 h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 sm:px-6 z-30">
        <div class="flex items-center">
          <button
            type="button"
            id="mobile-sidebar-toggle"
            class="lg:hidden -ml-1.5 mr-3 p-2 rounded-md text-slate-500 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-500"
            aria-controls="sidebar"
            aria-expanded="false"
          >
            <span class="sr-only">Open sidebar</span>
            <!-- Bars3Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
          </button>
          <a href="index.html" class="flex items-center gap-2 group">
            <img
              class="h-8 w-auto"
              src="../assets/verifact-logo.png"
              alt="Verifact Logo"
            />
            <span class="text-xl font-bold text-slate-800 group-hover:text-sky-600 transition-colors hidden sm:inline">
              Verifact
            </span>
          </a>
        </div>

        <div class="relative">
          <button
            id="user-menu-button"
            type="button"
            class="flex items-center p-1 rounded-full text-slate-500 hover:text-sky-600 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-sky-500"
            aria-expanded="false"
            aria-haspopup="true"
          >
            <span class="sr-only">Open user menu</span>
            <!-- UserCircleIcon Solid -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-7 w-7 sm:h-8 sm:w-8">
              <path fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clip-rule="evenodd" />
            </svg>
          </button>
          
          <div
            id="user-menu-dropdown"
            class="hidden origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 py-1 z-40"
          >
            <ul>
              <li>
                <a href="profile.html" class="user-menu-item block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 hover:text-sky-600 transition-colors">User Profile</a>
              </li>
              <li>
                <a href="logout.html" class="user-menu-item block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 hover:text-sky-600 transition-colors">Logout</a>
              </li>
            </ul>
          </div>
        </div>
      </header>

      <div class="flex flex-1 overflow-hidden">
        <!-- Mobile overlay -->
        <div
          id="mobile-sidebar-overlay"
          class="hidden fixed inset-0 z-20 bg-black/40 lg:hidden"
        ></div>

        <!-- Sidebar Component -->
        <div
          id="sidebar"
          class="fixed inset-y-0 left-0 z-30 w-64 transform transition-transform duration-300 ease-in-out -translate-x-full
                 lg:relative lg:z-0 lg:translate-x-0 
                 bg-gradient-to-br from-slate-50 to-white border-r border-slate-200/80 shadow-sm"
        >
          <aside class="flex flex-col h-full w-full overflow-hidden">
            <div class="flex items-center justify-end h-16 px-3 border-b border-slate-200/60 flex-shrink-0 bg-white/70 backdrop-blur-sm">
              <button
                id="sidebar-toggle-desktop"
                class="p-2 rounded-lg text-slate-500 hover:text-emerald-600 hover:bg-emerald-50 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-emerald-400 hidden lg:block ml-2 flex-shrink-0 transition-all duration-200"
                title="Collapse sidebar"
                aria-expanded="true" 
                aria-controls="sidebar-nav"
              >
                <span class="sr-only">Collapse sidebar</span>
                <!-- ChevronDoubleLeftIcon -->
                <svg id="sidebar-collapse-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5" />
                </svg>
                <!-- ChevronDoubleRightIcon (for when collapsed) -->
                <svg id="sidebar-expand-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 hidden">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5" />
                </svg>
              </button>
            </div>

            <nav id="sidebar-nav" class="flex-1 overflow-y-auto overflow-x-hidden pt-6 pb-4">
              <!-- Section 1 -->
              <div class="mb-4 last:mb-0">
                <ul role="list" class="space-y-2">
                  <li class="px-3">
                    <a
                      href="chat.html" 
                      title="Verify New Claim"
                      class="sidebar-nav-item group flex items-center rounded-xl py-3 text-sm font-medium transition-all duration-200 ease-in-out transform hover:scale-[1.02] px-4 bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg shadow-emerald-500/30"
                      aria-current="page"
                    >
                      <!-- CheckBadgeIcon -->
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 flex-shrink-0 mr-3 text-white drop-shadow-sm">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.745 3.745 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z" />
                      </svg>
                      <span class="sidebar-text truncate font-medium">Verify New Claim</span>
                    </a>
                  </li>
                  <li class="px-3">
                    <a
                      href="history-list.html"
                      title="History"
                      class="sidebar-nav-item group flex items-center rounded-xl py-3 text-sm font-medium transition-all duration-200 ease-in-out transform hover:scale-[1.02] px-4 text-slate-600 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 hover:shadow-md"
                    >
                      <!-- DocumentTextIcon -->
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 flex-shrink-0 mr-3 text-slate-500 group-hover:text-emerald-600">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                      </svg>
                      <span class="sidebar-text truncate font-medium">History</span>
                    </a>
                  </li>
                </ul>
              </div>
              <!-- Section 2: ACCOUNT -->
              <div class="mt-8 last:mb-0">
                <h3 class="sidebar-text mb-3 px-4 text-xs font-bold uppercase tracking-widest text-slate-500 transition-opacity duration-300 opacity-100 h-auto" aria-hidden="false">
                  ACCOUNT
                </h3>
                <ul role="list" class="space-y-2">
                  <li class="px-3">
                    <a
                      href="profile.html"
                      title="Profile"
                      class="sidebar-nav-item group flex items-center rounded-xl py-3 text-sm font-medium transition-all duration-200 ease-in-out transform hover:scale-[1.02] px-4 text-slate-600 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 hover:shadow-md"
                    >
                      <!-- UserIconOutline -->
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 flex-shrink-0 mr-3 text-slate-500 group-hover:text-emerald-600">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" />
                      </svg>
                      <span class="sidebar-text truncate font-medium">Profile</span>
                    </a>
                  </li>
                  <li class="px-3">
                    <a
                      href="settings.html"
                      title="Settings"
                      class="sidebar-nav-item group flex items-center rounded-xl py-3 text-sm font-medium transition-all duration-200 ease-in-out transform hover:scale-[1.02] px-4 text-slate-600 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 hover:shadow-md"
                    >
                      <!-- Cog6ToothIcon -->
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 flex-shrink-0 mr-3 text-slate-500 group-hover:text-emerald-600">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12a7.5 7.5 0 0015 0m-15 0a7.5 7.5 0 1115 0m-15 0H3m18 0h-1.5m-15 0H3.039M20.962 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75v.01M12 12.75v.01M12 18.75v.01M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                      </svg>
                      <span class="sidebar-text truncate font-medium">Settings</span>
                    </a>
                  </li>
                  <li class="px-3">
                    <a
                      href="#" 
                      title="Security"
                      class="sidebar-nav-item group flex items-center rounded-xl py-3 text-sm font-medium transition-all duration-200 ease-in-out transform hover:scale-[1.02] px-4 cursor-not-allowed text-slate-400"
                    >
                      <!-- ShieldCheckIcon -->
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5 flex-shrink-0 mr-3 text-slate-300">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622a11.99 11.99 0 00-.598-3.75h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
                      </svg>
                      <span class="sidebar-text truncate font-medium">Security</span>
                    </a>
                  </li>
                </ul>
              </div>
            </nav>

            <div id="sidebar-user-profile-area" class="flex-shrink-0 border-t border-slate-200/60 p-4 bg-gradient-to-r from-slate-50/50 to-emerald-50/30 h-auto">
              <a 
                href="profile.html" 
                class="group block transition-all duration-200 hover:scale-105 flex-shrink-0 overflow-hidden"
                title="User Profile"
              >
                <div class="flex items-center p-2 rounded-xl hover:bg-white/70 transition-all duration-200">
                  <div class="relative">
                    <!-- UserIconOutline -->
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="sidebar-user-icon h-10 w-10 text-slate-400 group-hover:text-emerald-600 transition-colors">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <div class="sidebar-user-status-indicator absolute -bottom-1 -right-1 w-3 h-3 bg-emerald-400 rounded-full border-2 border-white"></div>
                  </div>
                  <div class="sidebar-text ml-3 min-w-0">
                    <p class="text-sm font-semibold text-slate-700 group-hover:text-slate-900 truncate">
                      Bola A. Tinubu
                    </p>
                    <p class="text-xs font-medium text-emerald-600 group-hover:text-emerald-700 truncate">
                      View Profile
                    </p>
                  </div>
                </div>
              </a>
            </div>
          </aside>
        </div>

        <!-- Main content (AppContent.tsx) -->
        <main class="flex-1 overflow-y-auto bg-slate-100">
          <div id="app-content-wrapper" class="flex flex-col h-full bg-gradient-to-br from-slate-50 via-white to-slate-100">
            <div
              id="chat-container"
              class="flex-grow overflow-y-auto p-4 sm:p-6 pt-8 sm:pt-6 space-y-6 sm:space-y-8"
            >
              <!-- Initial Welcome Screen -->
              <div id="welcome-screen" class="flex mt-32 sm:mt-10 lg:mt-10 flex-col items-center justify-center flex-grow py-8 sm:py-12 h-full max-w-4xl mx-auto text-center">
                <div class="relative mb-6 sm:mb-8">
                  <div class="absolute inset-0 bg-gradient-to-r from-sky-400 to-blue-600 rounded-full blur-xl opacity-20 scale-110"></div>
                  <div class="relative bg-gradient-to-r from-sky-500 to-blue-600 p-3 sm:p-4 rounded-2xl shadow-2xl">
                    <!-- CpuChipIcon Solid -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-8 w-8 sm:h-12 sm:w-12 text-white">
                      <path fill-rule="evenodd" d="M14.25 2.25c-.243 0-.482.035-.712.101V2.25a.75.75 0 00-1.5 0v.101A5.235 5.235 0 0012 2.25c-.243 0-.482.035-.712.101V2.25a.75.75 0 00-1.5 0v.101A5.235 5.235 0 009.75 2.25c-.243 0-.482.035-.712.101V2.25a.75.75 0 00-1.5 0v.101A5.235 5.235 0 007.5 2.25c-.243 0-.482.035-.712.101V2.25a.75.75 0 00-1.5 0v.101A5.235 5.235 0 005.25 2.25c-.243 0-.482.035-.712.101V2.25a.75.75 0 00-1.5 0v.101A5.25 5.25 0 003 7.5v9a5.25 5.25 0 004.5 5.149V21.75a.75.75 0 001.5 0v-.101c.23.066.469.101.712.101s.482-.035.712-.101V21.75a.75.75 0 001.5 0v-.101c.23.066.469.101.712.101s.482-.035.712-.101V21.75a.75.75 0 001.5 0v-.101c.23.066.469.101.712.101s.482-.035.712-.101V21.75a.75.75 0 001.5 0v-.101A5.25 5.25 0 0021 16.5v-9A5.25 5.25 0 0016.5 2.351V2.25a.75.75 0 00-1.5 0v.101c-.23.066-.469.101-.712.101zM7.604 4.35v-.002c.003-.15.006-.3.01-.448h.002a.75.75 0 01.741-.652c.021.003.042.005.063.007h.002c.015.003.03.005.045.007L9 3.25l.002.012.002.012c.023.012.047.022.07.033l.001.005.002.005a.75.75 0 01.523.686v.002c.003.075.005.15.005.225a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75c0-.075.002-.15.005-.225zm4.5 0v-.002c.003-.15.006-.3.01-.448h.002a.75.75 0 01.741-.652c.021.003.042.005.063.007h.002c.015.003.03.005.045.007L13.5 3.25l.002.012.002.012c.023.012.047.022.07.033l.001.005.002.005a.75.75 0 01.523.686v.002c.003.075.005.15.005.225a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75c0-.075.002-.15.005-.225zm4.5 0v-.002c.003-.15.006-.3.01-.448h.002a.75.75 0 01.741-.652c.021.003.042.005.063.007h.002c.015.003.03.005.045.007L18 3.25l.002.012.002.012c.023.012.047.022.07.033l.001.005.002.005a.75.75 0 01.523.686v.002c.003.075.005.15.005.225a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75c0-.075.002-.15.005-.225zm1.437 15.002c-.003.026-.007.052-.01.077v.002a.75.75 0 01-.744.65h-.001a.747.747 0 01-.08-.006l-.002-.001-.002-.001L16.5 20l-.002-.012-.002-.012a.752.752 0 01-.07-.033l-.001-.005-.002-.005a.75.75 0 01-.523-.686v-.002c-.003-.075-.005-.15-.005-.225a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75c0 .075-.002.15-.005.225zm-4.5 0c-.003.026-.007.052-.01.077v.002a.75.75 0 01-.744.65h-.001a.747.747 0 01-.08-.006l-.002-.001-.002-.001L12 20l-.002-.012-.002-.012a.752.752 0 01-.07-.033l-.001-.005-.002-.005a.75.75 0 01-.523-.686v-.002c-.003-.075-.005-.15-.005-.225a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75c0 .075-.002.15-.005.225zm-4.5 0c-.003.026-.007.052-.01.077v.002a.75.75 0 01-.744.65h-.001a.747.747 0 01-.08-.006l-.002-.001-.002-.001L7.5 20l-.002-.012-.002-.012a.752.752 0 01-.07-.033l-.001-.005-.002-.005a.75.75 0 01-.523-.686v-.002c-.003-.075-.005-.15-.005-.225a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75c0 .075-.002.15-.005.225zM9.25 11.5a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0v-1.5zm4.5 0a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0v-1.5z" clip-rule="evenodd" /><path d="M7.5 7.75A.75.75 0 018.25 7h1.5a.75.75 0 010 1.5h-1.5A.75.75 0 017.5 7.75zm4.5 0A.75.75 0 0112.75 7h1.5a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75zm-6.75 3A.75.75 0 006 11.5v1.5a.75.75 0 001.5 0v-1.5A.75.75 0 006.75 10.75zm10.5 0a.75.75 0 00-.75.75v1.5a.75.75 0 001.5 0v-1.5a.75.75 0 00-.75-.75zm-3.75 3A.75.75 0 0114.25 15h1.5a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75zm-4.5 0A.75.75 0 019.75 15h1.5a.75.75 0 010 1.5h-1.5A.75.75 0 019.75 15.75z" /></svg>
                  </div>
                </div>
                <div class="mb-8 sm:mb-12">
                  <h1 class="text-3xl sm:text-5xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent mb-3 sm:mb-4">
                    Welcome to Verifact
                  </h1>
                  <p class="text-lg sm:text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed px-4">
                    Verify rumors, check information, and explore topics with
                    confidence.
                    <span class="block mt-2 text-base sm:text-lg text-slate-500">
                      How can I help you today?
                    </span>
                  </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 w-full max-w-5xl px-4">
                  <!-- Suggestion 1 -->
                  <button
                    type="button"
                    class="suggestion-button group relative bg-white/70 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 text-center flex flex-col items-center h-full focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 hover:-translate-y-1 border border-white/50"
                    data-prompt="Is this headline about moon cheese true?"
                  >
                    <div class="p-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 mb-4 group-hover:scale-110 transition-transform duration-300">
                      <!-- ShieldCheckIcon Solid -->
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6 text-white">
                        <path fill-rule="evenodd" d="M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.005 12.005 0 002.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 00.374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 00-.722-.516l-.143.001c-2.994 0-5.724-1.172-7.877-3.08zm.099 4.84a1.125 1.125 0 10-1.248 0l-3.675 6.013a1.125 1.125 0 00.432 1.612l3.528 1.292a1.125 1.125 0 001.272 0l3.528-1.292a1.125 1.125 0 00.432-1.612l-3.675-6.013z" clip-rule="evenodd" />
                      </svg>
                    </div>
                    <div>
                      <h3 class="text-lg font-semibold text-slate-800 mb-1">Verify a Claim</h3>
                      <p class="text-sm text-slate-600">Paste a news snippet or upload an image to check its authenticity.</p>
                    </div>
                    <span class="mt-3 inline-block text-sm text-sky-600 font-medium">Try: “Is this headline about moon cheese true?”</span>
                  </button>
                  <!-- Suggestion 2 -->
                  <button
                    type="button"
                    class="suggestion-button group relative bg-white/70 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 text-center flex flex-col items-center h-full focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 hover:-translate-y-1 border border-white/50"
                    data-prompt="Summarize the arguments for and against artificial sweeteners."
                  >
                    <div class="p-3 rounded-xl bg-gradient-to-r from-amber-500 to-orange-600 mb-4 group-hover:scale-110 transition-transform duration-300">
                      <!-- LightBulbIcon Solid -->
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6 text-white">
                        <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.166 7.758a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z" />
                      </svg>
                    </div>
                    <div>
                      <h3 class="text-lg font-semibold text-slate-800 mb-1">Explore Topics</h3>
                      <p class="text-sm text-slate-600">Ask about common misconceptions or get summaries on debated issues.</p>
                    </div>
                    <span class="mt-3 inline-block text-sm text-sky-600 font-medium">Try: “Summarize the arguments for and against artificial sweeteners.”</span>
                  </button>
                  <!-- Suggestion 3 -->
                  <button
                    type="button"
                    class="suggestion-button group relative bg-white/70 backdrop-blur-sm p-4 sm:p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 text-center flex flex-col items-center h-full focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 hover:-translate-y-1 border border-white/50"
                    data-prompt="What's the current population of Earth?"
                  >
                    <div class="p-3 rounded-xl bg-gradient-to-r from-purple-500 to-indigo-600 mb-4 group-hover:scale-110 transition-transform duration-300">
                      <!-- SparklesIcon Solid -->
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6 text-white">
                        <path fill-rule="evenodd" d="M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 01.75.75c0 5.056-2.383 9.555-6.084 12.436A6.75 6.75 0 019.75 22.5a.75.75 0 01-.75-.75v-4.131A15.838 15.838 0 016.382 15H2.25a.75.75 0 01-.75-.75 6.75 6.75 0 017.815-6.666zM15 6.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z" clip-rule="evenodd" />
                        <path d="M5.26 17.242a.75.75 0 10-.897-1.203 5.243 5.243 0 00-2.05 5.022.75.75 0 00.625.627 5.243 5.243 0 005.022-2.051.75.75 0 10-1.202-.897 3.744 3.744 0 01-3.008 1.51c0-1.23.592-2.323 1.51-3.008z" />
                      </svg>
                    </div>
                    <div>
                      <h3 class="text-lg font-semibold text-slate-800 mb-1">Quick Fact-Check</h3>
                      <p class="text-sm text-slate-600">Got a quick question? Verifact can try to find a swift answer.</p>
                    </div>
                    <span class="mt-3 inline-block text-sm text-sky-600 font-medium">Try: “What's the current population of Earth?”</span>
                  </button>
                </div>
              </div>

              <!-- Messages will be appended here by JavaScript -->
              
              <!-- Loading indicator -->
              <div id="loading-indicator" class="hidden flex justify-start mr-12 sm:mr-24 animate-fade-in-up">
                <div class="flex items-start gap-4">
                  <div class="bg-gradient-to-r from-slate-400 to-slate-500 p-2 rounded-full shadow-lg">
                     <!-- CpuChipIcon Solid (loading) -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-8 w-8 text-white animate-pulse">
                        <use href="#cpu-chip-icon-path" />
                    </svg>
                  </div>
                  <div class="bg-white/80 backdrop-blur-sm p-6 rounded-2xl rounded-bl-md shadow-xl">
                    <div class="flex items-center space-x-2">
                      <div class="flex space-x-1">
                        <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce"></div>
                        <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
                        <div class="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                      </div>
                      <span class="text-slate-500 text-sm">Analyzing...</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Input Area -->
            <div class="flex-shrink-0 p-6 border-t border-slate-200/50 bg-white/50 backdrop-blur-sm">
              <div class="w-full max-w-4xl mx-auto">
                <div id="image-preview-container" class="hidden mb-4 p-3 border border-slate-300 rounded-2xl bg-white/80 backdrop-blur-sm relative w-fit max-w-xs shadow-lg">
                  <img id="image-preview-img" src="" alt="Selected preview" class="max-h-32 rounded-xl" />
                  <button
                    type="button"
                    id="remove-image-button"
                    class="absolute -top-2 -right-2 p-1 bg-rose-500 text-white rounded-full hover:bg-rose-600 transition-colors shadow-lg hover:scale-110 transform"
                    aria-label="Remove image"
                  >
                    <!-- XCircleIcon Solid -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-4 w-4">
                      <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z" clip-rule="evenodd" />
                    </svg>
                  </button>
                  <p id="image-preview-name" class="text-xs text-slate-500 mt-2 truncate font-medium" title=""></p>
                </div>

                <form id="chat-form" class="relative flex items-end p-2 bg-white/80 backdrop-blur-sm border border-slate-300/50 rounded-2xl shadow-xl focus-within:ring-2 focus-within:ring-sky-500/50 focus-within:border-sky-400 transition-all duration-200">
                  <button
                    type="button"
                    id="upload-image-button"
                    class="p-3 text-slate-500 hover:text-sky-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-500/50 mr-2 group relative hover:bg-slate-50 transition-all duration-200"
                    aria-label="Upload image"
                  >
                    <!-- PlusCircleIcon Solid -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6 transition-all duration-200 group-hover:scale-110">
                      <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z" clip-rule="evenodd" />
                    </svg>
                    <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 whitespace-nowrap px-3 py-1.5 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity pointer-events-none shadow-lg">
                      Upload Image
                    </span>
                  </button>

                  <input
                    type="file"
                    id="file-input"
                    accept="image/*"
                    class="hidden"
                    aria-hidden="true"
                  />

                  <textarea
                    id="chat-input-textarea"
                    rows="1"
                    placeholder="Send a message or upload an image..."
                    class="flex-grow p-3 pr-14 bg-transparent border-none resize-none focus:outline-none focus:ring-0 text-slate-800 placeholder-slate-500 text-base max-h-40 overflow-y-auto leading-relaxed"
                  ></textarea>

                  <button
                    id="send-button"
                    type="submit"
                    disabled
                    class="absolute right-2 bottom-2 p-2.5 rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-sky-500 bg-slate-300 text-slate-500"
                    aria-label="Send message"
                  >
                    <!-- PaperAirplaneIcon Solid -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6 transition-all duration-200">
                      <path d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z" />
                    </svg>
                  </button>
                </form>

                <p class="text-xs text-slate-500 text-center mt-3 px-2">
                  Verifact can make mistakes. Consider checking important information.
                </p>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Reusable SVG definitions -->
    <svg class="hidden">
      <defs>
        <path id="user-circle-icon-path" fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clip-rule="evenodd" />
        <path id="cpu-chip-icon-path" fill-rule="evenodd" d="M14.25 2.25c-.243 0-.482.035-.712.101V2.25a.75.75 0 00-1.5 0v.101A5.235 5.235 0 0012 2.25c-.243 0-.482.035-.712.101V2.25a.75.75 0 00-1.5 0v.101A5.235 5.235 0 009.75 2.25c-.243 0-.482.035-.712.101V2.25a.75.75 0 00-1.5 0v.101A5.235 5.235 0 007.5 2.25c-.243 0-.482.035-.712.101V2.25a.75.75 0 00-1.5 0v.101A5.235 5.235 0 005.25 2.25c-.243 0-.482.035-.712.101V2.25a.75.75 0 00-1.5 0v.101A5.25 5.25 0 003 7.5v9a5.25 5.25 0 004.5 5.149V21.75a.75.75 0 001.5 0v-.101c.23.066.469.101.712.101s.482-.035.712-.101V21.75a.75.75 0 001.5 0v-.101c.23.066.469.101.712.101s.482-.035.712-.101V21.75a.75.75 0 001.5 0v-.101c.23.066.469.101.712.101s.482-.035.712-.101V21.75a.75.75 0 001.5 0v-.101A5.25 5.25 0 0021 16.5v-9A5.25 5.25 0 0016.5 2.351V2.25a.75.75 0 00-1.5 0v.101c-.23.066-.469.101-.712.101zM7.604 4.35v-.002c.003-.15.006-.3.01-.448h.002a.75.75 0 01.741-.652c.021.003.042.005.063.007h.002c.015.003.03.005.045.007L9 3.25l.002.012.002.012c.023.012.047.022.07.033l.001.005.002.005a.75.75 0 01.523.686v.002c.003.075.005.15.005.225a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75c0-.075.002-.15.005-.225zm4.5 0v-.002c.003-.15.006-.3.01-.448h.002a.75.75 0 01.741-.652c.021.003.042.005.063.007h.002c.015.003.03.005.045.007L13.5 3.25l.002.012.002.012c.023.012.047.022.07.033l.001.005.002.005a.75.75 0 01.523.686v.002c.003.075.005.15.005.225a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75c0-.075.002-.15.005-.225zm4.5 0v-.002c.003-.15.006-.3.01-.448h.002a.75.75 0 01.741-.652c.021.003.042.005.063.007h.002c.015.003.03.005.045.007L18 3.25l.002.012.002.012c.023.012.047.022.07.033l.001.005.002.005a.75.75 0 01.523.686v.002c.003.075.005.15.005.225a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75c0-.075.002-.15.005-.225zm1.437 15.002c-.003.026-.007.052-.01.077v.002a.75.75 0 01-.744.65h-.001a.747.747 0 01-.08-.006l-.002-.001-.002-.001L16.5 20l-.002-.012-.002-.012a.752.752 0 01-.07-.033l-.001-.005-.002-.005a.75.75 0 01-.523-.686v-.002c-.003-.075-.005-.15-.005-.225a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75c0 .075-.002.15-.005.225zm-4.5 0c-.003.026-.007.052-.01.077v.002a.75.75 0 01-.744.65h-.001a.747.747 0 01-.08-.006l-.002-.001-.002-.001L12 20l-.002-.012-.002-.012a.752.752 0 01-.07-.033l-.001-.005-.002-.005a.75.75 0 01-.523-.686v-.002c-.003-.075-.005-.15-.005-.225a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75c0 .075-.002.15-.005.225zm-4.5 0c-.003.026-.007.052-.01.077v.002a.75.75 0 01-.744.65h-.001a.747.747 0 01-.08-.006l-.002-.001-.002-.001L7.5 20l-.002-.012-.002-.012a.752.752 0 01-.07-.033l-.001-.005-.002-.005a.75.75 0 01-.523-.686v-.002c-.003-.075-.005-.15-.005-.225a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75c0 .075-.002-.15-.005.225zM9.25 11.5a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0v-1.5zm4.5 0a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0v-1.5z" clip-rule="evenodd" />
        <path id="status-verified-icon-path" fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd" />
        <path id="status-debunked-icon-path" fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z" clip-rule="evenodd" />
        <path id="status-inconclusive-icon-path" fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.25-1.5a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H11.25a.75.75 0 01-.75-.75v-.01zM10.5 12a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm1.5-3.75a.75.75 0 00-.75.75v.008c0 .787.612 1.42.056 1.42H12a.75.75 0 00.75-.75V9a.75.75 0 00-.75-.75h-.008A.75.75 0 0012 8.25z" clip-rule="evenodd" />
        <path id="status-pending-icon-path" fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z" clip-rule="evenodd" />
      </defs>
    </svg>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // --- Global Elements ---
        const sidebar = document.getElementById('sidebar');
        const mobileSidebarToggle = document.getElementById('mobile-sidebar-toggle');
        const mobileSidebarOverlay = document.getElementById('mobile-sidebar-overlay');
        
        const userMenuButton = document.getElementById('user-menu-button');
        const userMenuDropdown = document.getElementById('user-menu-dropdown');
        
        const desktopSidebarToggleButton = document.getElementById('sidebar-toggle-desktop');
        const sidebarCollapseIcon = document.getElementById('sidebar-collapse-icon');
        const sidebarExpandIcon = document.getElementById('sidebar-expand-icon');
        const sidebarTextElements = document.querySelectorAll('.sidebar-text');
        const sidebarNavItems = document.querySelectorAll('.sidebar-nav-item');
        const sidebarUserProfileArea = document.getElementById('sidebar-user-profile-area');
        const sidebarUserIcon = document.querySelector('.sidebar-user-icon'); // Assuming one
        const sidebarUserStatusIndicator = document.querySelector('.sidebar-user-status-indicator');

        let isSidebarCollapsed = false; // For desktop
        let isMobileSidebarOpen = false;
        let isUserMenuOpen = false;

        // --- Header: Mobile Sidebar Toggle ---
        if (mobileSidebarToggle) {
          mobileSidebarToggle.addEventListener('click', () => {
            isMobileSidebarOpen = !isMobileSidebarOpen;
            sidebar.classList.toggle('-translate-x-full');
            sidebar.classList.toggle('translate-x-0');
            mobileSidebarOverlay.classList.toggle('hidden');
            mobileSidebarToggle.setAttribute('aria-expanded', isMobileSidebarOpen);
            if (isMobileSidebarOpen) {
                mobileSidebarToggle.querySelector('span.sr-only').textContent = 'Close sidebar';
            } else {
                mobileSidebarToggle.querySelector('span.sr-only').textContent = 'Open sidebar';
            }
          });
        }
        if (mobileSidebarOverlay) {
            mobileSidebarOverlay.addEventListener('click', () => {
                if (isMobileSidebarOpen) mobileSidebarToggle.click();
            });
        }
        // Close mobile sidebar on nav item click
        document.querySelectorAll('#sidebar .sidebar-nav-item, #sidebar-user-profile-area a').forEach(link => {
            link.addEventListener('click', () => {
                if (isMobileSidebarOpen && window.innerWidth < 1024) { // lg breakpoint
                    mobileSidebarToggle.click();
                }
            });
        });


        // --- Header: User Menu Toggle ---
        if (userMenuButton && userMenuDropdown) {
          userMenuButton.addEventListener('click', (event) => {
            event.stopPropagation();
            isUserMenuOpen = !isUserMenuOpen;
            userMenuDropdown.classList.toggle('hidden', !isUserMenuOpen);
            userMenuButton.setAttribute('aria-expanded', isUserMenuOpen);
          });

          document.addEventListener('click', (event) => {
            if (isUserMenuOpen && !userMenuDropdown.contains(event.target) && !userMenuButton.contains(event.target)) {
              isUserMenuOpen = false;
              userMenuDropdown.classList.add('hidden');
              userMenuButton.setAttribute('aria-expanded', false);
            }
          });
          userMenuDropdown.querySelectorAll('.user-menu-item').forEach(item => {
            item.addEventListener('click', () => {
                isUserMenuOpen = false;
                userMenuDropdown.classList.add('hidden');
                userMenuButton.setAttribute('aria-expanded', false);
            });
          });
        }

        // --- Sidebar: Desktop Collapse/Expand ---
        const toggleDesktopSidebar = () => {
            isSidebarCollapsed = !isSidebarCollapsed;
            sidebar.classList.toggle('w-64', !isSidebarCollapsed);
            sidebar.classList.toggle('w-20', isSidebarCollapsed);
            
            sidebarCollapseIcon.classList.toggle('hidden', isSidebarCollapsed);
            sidebarExpandIcon.classList.toggle('hidden', !isSidebarCollapsed);
            desktopSidebarToggleButton.setAttribute('aria-expanded', !isSidebarCollapsed);
            desktopSidebarToggleButton.title = isSidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar';
            desktopSidebarToggleButton.querySelector('span.sr-only').textContent = isSidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar';


            sidebarTextElements.forEach(el => {
              el.classList.toggle('opacity-0', isSidebarCollapsed);
              el.classList.toggle('h-0', isSidebarCollapsed);
              el.classList.toggle('overflow-hidden', isSidebarCollapsed);
              el.classList.toggle('opacity-100', !isSidebarCollapsed);
              el.classList.toggle('h-auto', !isSidebarCollapsed);
              if (el.tagName === 'H3') {
                el.setAttribute('aria-hidden', isSidebarCollapsed);
              }
            });

            sidebarNavItems.forEach(item => {
              item.classList.toggle('px-3', isSidebarCollapsed);
              item.classList.toggle('justify-center', isSidebarCollapsed);
              item.classList.toggle('px-4', !isSidebarCollapsed);
              const icon = item.querySelector('svg');
              if (icon) {
                  icon.classList.toggle('mr-3', !isSidebarCollapsed);
              }
              // Update title for collapsed items
              const textSpan = item.querySelector('.sidebar-text');
              if (isSidebarCollapsed && textSpan) {
                item.title = textSpan.textContent.trim();
              } else {
                item.removeAttribute('title');
              }
            });
            
            sidebarUserProfileArea.classList.toggle('h-[70px]', isSidebarCollapsed);
            sidebarUserProfileArea.classList.toggle('flex', isSidebarCollapsed);
            sidebarUserProfileArea.classList.toggle('items-center', isSidebarCollapsed);
            sidebarUserProfileArea.classList.toggle('justify-center', isSidebarCollapsed);
            sidebarUserProfileArea.classList.toggle('h-auto', !isSidebarCollapsed);
            
            const userProfileLink = sidebarUserProfileArea.querySelector('a');
            if (userProfileLink) {
                userProfileLink.classList.toggle('p-2', isSidebarCollapsed);
                userProfileLink.classList.toggle('rounded-lg', isSidebarCollapsed);
                userProfileLink.classList.toggle('hover:bg-emerald-100', isSidebarCollapsed);
            }


            if (sidebarUserIcon) {
                sidebarUserIcon.classList.toggle('h-7', isSidebarCollapsed);
                sidebarUserIcon.classList.toggle('w-7', isSidebarCollapsed);
                sidebarUserIcon.classList.toggle('text-slate-500', isSidebarCollapsed);
                sidebarUserIcon.classList.toggle('hover:text-emerald-600', isSidebarCollapsed);
                
                sidebarUserIcon.classList.toggle('h-10', !isSidebarCollapsed);
                sidebarUserIcon.classList.toggle('w-10', !isSidebarCollapsed);
                sidebarUserIcon.classList.toggle('text-slate-400', !isSidebarCollapsed);
            }
            if(sidebarUserStatusIndicator) {
                 sidebarUserStatusIndicator.classList.toggle('hidden', isSidebarCollapsed);
            }
        };

        if (desktopSidebarToggleButton) {
            desktopSidebarToggleButton.addEventListener('click', toggleDesktopSidebar);
        }


        // --- AppContent (Chat) Logic ---
        const appContentWrapper = document.getElementById('app-content-wrapper');
        const chatContainer = document.getElementById('chat-container');
        const welcomeScreen = document.getElementById('welcome-screen');
        const loadingIndicator = document.getElementById('loading-indicator');
        
        const chatForm = document.getElementById('chat-form');
        const chatInputTextarea = document.getElementById('chat-input-textarea');
        const sendButton = document.getElementById('send-button');
        
        const uploadImageButton = document.getElementById('upload-image-button');
        const fileInput = document.getElementById('file-input');
        const imagePreviewContainer = document.getElementById('image-preview-container');
        const imagePreviewImg = document.getElementById('image-preview-img');
        const imagePreviewName = document.getElementById('image-preview-name');
        const removeImageButton = document.getElementById('remove-image-button');
        const suggestionButtons = document.querySelectorAll('.suggestion-button');

        let messages = [];
        let hasStartedChat = false;
        let selectedImageFile = null;
        let isLoading = false;

        const getStatusStyles = (status) => {
          switch (status) {
            case "verified": return { Icon: "status-verified-icon-path", borderColor: "border-emerald-400", textColor: "text-emerald-700", bgColor: "bg-emerald-50", accent: "bg-gradient-to-r from-emerald-500 to-teal-600", varColor: "var(--verified-color)" };
            case "debunked": return { Icon: "status-debunked-icon-path", borderColor: "border-rose-400", textColor: "text-rose-700", bgColor: "bg-rose-50", accent: "bg-gradient-to-r from-rose-500 to-pink-600", varColor: "var(--debunked-color)" };
            case "inconclusive": return { Icon: "status-inconclusive-icon-path", borderColor: "border-amber-400", textColor: "text-amber-700", bgColor: "bg-amber-50", accent: "bg-gradient-to-r from-amber-500 to-orange-600", varColor: "var(--inconclusive-color)" };
            case "pending": default: return { Icon: "status-pending-icon-path", borderColor: "border-sky-400", textColor: "text-sky-700", bgColor: "bg-sky-50", accent: "bg-gradient-to-r from-sky-500 to-blue-600", varColor: "var(--pending-color)" };
          }
        };

        const scrollToBottom = () => {
          if (chatContainer) chatContainer.scrollTop = chatContainer.scrollHeight;
        };

        const adjustTextareaHeight = () => {
          if (chatInputTextarea) {
            chatInputTextarea.style.height = "auto";
            const scrollHeight = chatInputTextarea.scrollHeight;
            chatInputTextarea.style.height = `${Math.min(scrollHeight, 160)}px`; // Max height 160px
          }
        };

        const updateSendButtonState = () => {
          const canSubmit = (chatInputTextarea.value.trim() !== "" || selectedImageFile !== null) && !isLoading;
          sendButton.disabled = !canSubmit;
          if (canSubmit) {
            sendButton.classList.remove('bg-slate-300', 'text-slate-500');
            sendButton.classList.add('bg-gradient-to-r', 'from-sky-500', 'to-blue-600', 'text-white', 'hover:from-sky-600', 'hover:to-blue-700', 'shadow-lg', 'hover:shadow-xl', 'hover:scale-105');
          } else {
            sendButton.classList.add('bg-slate-300', 'text-slate-500');
            sendButton.classList.remove('bg-gradient-to-r', 'from-sky-500', 'to-blue-600', 'text-white', 'hover:from-sky-600', 'hover:to-blue-700', 'shadow-lg', 'hover:shadow-xl', 'hover:scale-105');
          }
        };
        
        if (chatInputTextarea) {
            chatInputTextarea.addEventListener('input', () => {
                adjustTextareaHeight();
                updateSendButtonState();
            });
        }

        const renderMessage = (msg) => {
          const messageElement = document.createElement('div');
          messageElement.classList.add('animate-fade-in-up');
          const timeString = msg.timestamp.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });

          if (msg.sender === "user") {
            messageElement.className = "flex justify-end ml-12 sm:ml-24 animate-fade-in-up";
            messageElement.innerHTML = `
              <div class="flex items-start gap-4 max-w-2xl">
                <div class="bg-gradient-to-r from-sky-500 to-blue-600 p-4 rounded-2xl rounded-br-md shadow-lg text-white">
                  ${msg.imageUrl ? `<div class="mb-3 rounded-lg overflow-hidden"><img src="${msg.imageUrl}" alt="${msg.imageName || "Uploaded image"}" class="max-h-60 w-auto rounded-lg"/></div>` : ''}
                  ${msg.text ? `<p class="whitespace-pre-wrap break-words leading-relaxed">${msg.text}</p>` : ''}
                  <p class="text-xs mt-3 opacity-80 text-right">${timeString}</p>
                </div>
                <div class="bg-gradient-to-r from-sky-500 to-blue-600 p-2 rounded-full shadow-lg">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-8 w-8 text-white"><use href="#user-circle-icon-path" /></svg>
                </div>
              </div>
            `;
          } else { // Verifact message
            const styles = getStatusStyles(msg.status);
            messageElement.className = "flex justify-start mr-12 sm:mr-24 animate-fade-in-up";
            messageElement.innerHTML = `
              <div class="flex items-start gap-4 max-w-2xl">
                <div class="p-2 rounded-full shadow-lg ${styles.accent}">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-8 w-8 text-white"><use href="#cpu-chip-icon-path" /></svg>
                </div>
                <div class="bg-white/80 backdrop-blur-sm p-6 rounded-2xl rounded-bl-md shadow-xl border-l-4 border-0" style="border-left-color: ${styles.varColor};">
                  <div class="mb-4">
                    <span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold ${styles.bgColor} ${styles.textColor} border ${styles.borderColor} shadow-sm">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4 mr-2"><use href="#${styles.Icon}" /></svg>
                      ${msg.status.charAt(0).toUpperCase() + msg.status.slice(1)}
                    </span>
                  </div>
                  ${(msg.originalQuery.text || msg.originalQuery.imageName) ? `
                  <div class="mb-4 p-3 bg-slate-50/80 rounded-xl text-sm text-slate-600 border border-slate-200/50">
                    <span class="font-medium text-slate-700">Regarding your query:</span>
                    ${msg.originalQuery.text ? `<em class="block mt-1 text-slate-600">"${msg.originalQuery.text}"</em>` : ''}
                    ${msg.originalQuery.imageName ? `<em class="block mt-1 text-slate-600">Image: ${msg.originalQuery.imageName}</em>` : ''}
                  </div>` : ''}
                  <div class="mb-4">
                    <h4 class="font-bold ${styles.textColor} mb-2 text-lg">Summary</h4>
                    <p class="text-slate-700 whitespace-pre-wrap break-words leading-relaxed">${msg.summary}</p>
                  </div>
                  <div>
                    <h4 class="font-bold ${styles.textColor} mb-2 text-lg">Details</h4>
                    <div class="prose prose-slate max-w-none text-slate-600">
                      ${msg.details.split("\\n").filter(p => p.trim()).map(p => `<p class="mb-3 leading-relaxed">${p}</p>`).join('')}
                    </div>
                  </div>
                  <p class="text-xs mt-4 pt-3 border-t border-slate-200/50 text-slate-500">${timeString}</p>
                </div>
              </div>
            `;
          }
          // Insert before the loading indicator if it exists, otherwise append
          if (loadingIndicator && loadingIndicator.parentNode === chatContainer) {
            chatContainer.insertBefore(messageElement, loadingIndicator);
          } else {
            chatContainer.appendChild(messageElement);
          }
        };

        const handleImageChange = (event) => {
          if (event.target.files && event.target.files[0]) {
            selectedImageFile = event.target.files[0];
            const reader = new FileReader();
            reader.onloadend = () => {
              imagePreviewImg.src = reader.result;
              imagePreviewName.textContent = selectedImageFile.name;
              imagePreviewName.title = selectedImageFile.name;
              imagePreviewContainer.classList.remove('hidden');
            };
            reader.readAsDataURL(selectedImageFile);
            updateSendButtonState();
          }
        };

        if (uploadImageButton) uploadImageButton.addEventListener('click', () => fileInput.click());
        if (fileInput) fileInput.addEventListener('change', handleImageChange);
        
        if (removeImageButton) {
            removeImageButton.addEventListener('click', () => {
                selectedImageFile = null;
                imagePreviewImg.src = "";
                imagePreviewContainer.classList.add('hidden');
                fileInput.value = ""; // Reset file input
                updateSendButtonState();
            });
        }

        const handleSubmit = async (event) => {
          if (event) event.preventDefault();
          const inputTextValue = chatInputTextarea.value.trim();
          if (!inputTextValue && !selectedImageFile) return;

          if (!hasStartedChat) {
            hasStartedChat = true;
            if(welcomeScreen) welcomeScreen.classList.add('hidden');
          }

          const userMessage = {
            id: crypto.randomUUID(),
            sender: "user",
            text: inputTextValue || undefined,
            imageUrl: selectedImageFile ? imagePreviewImg.src : undefined,
            imageName: selectedImageFile?.name || undefined,
            timestamp: new Date(),
          };
          messages.push(userMessage);
          renderMessage(userMessage);
          scrollToBottom();

          const currentInputText = inputTextValue;
          const currentSelectedImageName = selectedImageFile?.name;
          const currentImagePreview = selectedImageFile ? imagePreviewImg.src : null;


          chatInputTextarea.value = "";
          selectedImageFile = null;
          imagePreviewImg.src = "";
          imagePreviewContainer.classList.add('hidden');
          if (fileInput) fileInput.value = "";
          adjustTextareaHeight();
          
          isLoading = true;
          updateSendButtonState();
          chatInputTextarea.disabled = true;
          uploadImageButton.disabled = true;
          if (loadingIndicator) loadingIndicator.classList.remove('hidden');
          scrollToBottom();

          // Simulate API call
          setTimeout(() => {
            const mockStatuses = ["verified", "debunked", "inconclusive", "pending"];
            const randomStatus = mockStatuses[Math.floor(Math.random() * mockStatuses.length)];

            const verifactResponse = {
              id: crypto.randomUUID(),
              sender: "verifact",
              status: randomStatus,
              summary: `The claim about "${currentInputText || currentSelectedImageName || "your query"}" has been analyzed. Our initial findings suggest it is ${randomStatus}.`,
              details: `Further investigation reveals several key points supporting this assessment. For instance, [Dummy Detail 1 related to ${currentInputText || currentSelectedImageName}]. \n\nAdditionally, [Dummy Detail 2 pointing towards the ${randomStatus} status]. \n\nWe cross-referenced multiple sources, including [Source A] and [Report B], to arrive at this conclusion. More information can be found in our comprehensive analysis document.`,
              originalQuery: {
                text: currentInputText || undefined,
                imageName: currentSelectedImageName || undefined,
              },
              timestamp: new Date(),
            };
            messages.push(verifactResponse);
            renderMessage(verifactResponse);
            
            isLoading = false;
            updateSendButtonState();
            chatInputTextarea.disabled = false;
            uploadImageButton.disabled = false;
            if (loadingIndicator) loadingIndicator.classList.add('hidden');
            scrollToBottom();
          }, 2000);
        };

        if (chatForm) chatForm.addEventListener('submit', handleSubmit);
        if (chatInputTextarea) {
            chatInputTextarea.addEventListener('keydown', (e) => {
                if (e.key === "Enter" && !e.shiftKey) {
                    e.preventDefault();
                    if ((chatInputTextarea.value.trim() !== "" || selectedImageFile) && !isLoading) {
                         handleSubmit();
                    }
                }
            });
        }
        
        suggestionButtons.forEach(button => {
            button.addEventListener('click', () => {
                const promptText = button.dataset.prompt;
                if (promptText && chatInputTextarea) {
                    chatInputTextarea.value = promptText;
                    adjustTextareaHeight();
                    updateSendButtonState();
                    chatInputTextarea.focus();
                }
            });
        });

        // Initial state updates
        updateSendButtonState();
        adjustTextareaHeight(); 
        
        // Check initial screen width for sidebar state on desktop
        if (window.innerWidth < 1024 && desktopSidebarToggleButton) { // Below lg
             // Keep it as is, mobile logic handles it
        } else if (window.innerWidth >= 1024 && desktopSidebarToggleButton && localStorage.getItem('sidebarCollapsed') === 'true') {
            // If desktop and previously collapsed, collapse it
            toggleDesktopSidebar();
        }

        // Persist sidebar state (optional)
        if(desktopSidebarToggleButton) {
            desktopSidebarToggleButton.addEventListener('click', () => {
                localStorage.setItem('sidebarCollapsed', isSidebarCollapsed);
            });
        }

      });
    </script>
</body>
</html>